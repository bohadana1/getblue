window.__tcfapi && window.__tcfapi("addEventListener", 2, (async (e, t) => {
  if (!t || !e) return;
  const { tcString: n } = e;
  setLocalStorage("tcString", n);
}));

window.blue = {};
window.blue.isMobileDetected = function () {
  return !!(navigator.userAgent.match(/Android/i) ||
    navigator.userAgent.match(/webOS/i) ||
    navigator.userAgent.match(/iPhone/i) ||
    navigator.userAgent.match(/iPad/i) ||
    navigator.userAgent.match(/iPod/i) ||
    navigator.userAgent.match(/BlackBerry/i) ||
    navigator.userAgent.match(/Windows Phone/i));
};
window.blue.isFirefox = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
window.console || (console = { log: function () {} });

(function (e, t) {
  e = e || "docReady", t = t || window;
  var o = [], n = !1, i = !1;
  function r() {
    if (!n) {
      n = !0;
      for (var e = 0; e < o.length; e++) o[e].fn.call(window, o[e].ctx);
      o = [];
    }
  }
  function a() {
    ("complete" !== document.readyState && "interactive" !== document.readyState) || r();
  }
  t[e] = function (e, t) {
    if ("function" != typeof e) throw new TypeError("callback for docReady(fn) must be a function");
    n ? setTimeout(function () { e(t); }, 1) :
      (o.push({ fn: e, ctx: t }),
      "complete" === document.readyState || "interactive" === document.readyState
        ? setTimeout(r, 1)
        : i || (document.addEventListener
          ? (document.addEventListener("DOMContentLoaded", r, !1),
            window.addEventListener("load", r, !1))
          : (document.attachEvent("onreadystatechange", a),
            window.attachEvent("onload", r)),
          i = !0));
  };
})("documentReady", window);

documentReady(function () {
  var e;
  (blue_obj[instId] = new blue_obj,
    window.blue_v = "29092023-1023",
    window.bluecpy_id = generateUid(),
    window.blue_ulc = "",
    setLastClickBlue(),
    !0 === isCookieEnabled()) &&
  ("" != (e = getCookieBlue("blueID")) && "null" !== e && null !== e
    ? window.bluecpy_id = e
    : setCookieBlue("blueID", window.bluecpy_id, 365));
  
  !0 === isSessionStorageEnabled() &&
  (null !== (e = getSessionStorage("blueID")) && "null" !== e
    ? window.bluecpy_id = e
    : setSessionStorage("blueID", window.bluecpy_id));
  
  !0 === isLocalStorageEnabled() &&
  (null !== (e = getLocalStorage("blueID")) && "null" !== e
    ? window.bluecpy_id = e
    : setLocalStorage("blueID", window.bluecpy_id));
  
  if (!("bluecpy_id" in window) || !window.bluecpy_id.length || "" == window.bluecpy_id || null == window.bluecpy_id || "null" == window.bluecpy_id) {
    window.bluecpy_id = generateUid();
    try { setCookieBlue("blueID", window.bluecpy_id, 365); } catch (e) {}
    try { setSessionStorage("blueID", window.bluecpy_id); } catch (e) {}
    try { setLocalStorage("blueID", window.bluecpy_id); } catch (e) {}
  }
  executeFlow(instId);
});

executeFlow = function (e) {
  var t = window.blue_q || [];
  for (i = 0; i < t.length; i++) loadFunction(t[i].event, t[i].value);
  var o = blue_obj[e].getAttributes(),
      n = o.campaignId.split(","),
      r = o.pageType.split(",");
  for (idxCampaignId = 0; idxCampaignId < n.length; idxCampaignId++)
    for (idxPageType = 0; idxPageType < r.length; idxPageType++)
      executeRequests(n[idxCampaignId], r[idxPageType]);
};

var instId = (new Date).getTime(),
    campaignId = "",
    pageType = "",
    blueProductId = "",
    transactionTotal = "",
    transactionId = "",
    pixelMode = 0,
    fingerprint = "";

function setLocalStorage(e, t) {
  try { return localStorage.setItem(e, t), !0; } catch (e) { return !1; }
}
function getLocalStorage(e) {
  try { return window.localStorage && localStorage.getItem(e) || ""; } catch (e) { return ""; }
}
function setSessionStorage(e, t) {
  try { return window.sessionStorage.setItem(e, t), !0; } catch (e) { return !1; }
}
function getSessionStorage(e) {
  try { return window.sessionStorage && window.sessionStorage.getItem(e) || ""; } catch (e) { return ""; }
}
function setCookieBlue(e, t, o) {
  var n = new Date;
  n.setTime(n.getTime() + 24 * o * 60 * 60 * 1e3);
  var i = "expires=" + n.toUTCString();
  document.cookie = e + "=" + t + ";domain=." + getDomainBlue(window.location.protocol + "//" + window.location.hostname) + ";" + i + ";path=/";
}
function getCookieBlue(e) {
  var t = e + "=";
  try {
    for (var o = decodeURIComponent(document.cookie).split(";"), n = 0; n < o.length; n++) {
      for (var i = o[n]; " " == i.charAt(0);) i = i.substring(1);
      if (0 == i.indexOf(t)) return i.substring(t.length, i.length);
    }
    return "";
  } catch (t) { return getLocalStorage(e); }
}
function generateUid() {
  var e = (new Date).getTime();
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) {
    var o = (e + 16 * Math.random()) % 16 | 0;
    return e = Math.floor(e / 16), ("x" == t ? o : 3 & o | 8).toString(16);
  });
}
function setLastClickBlue() {
  var e = window.location.search,
      t = new URLSearchParams(e).get("utm_source") || "";
  t.length ? (
    window.blue_ulc = t,
    !0 === isCookieEnabled() && setCookieBlue("blueULC", t, 30),
    !0 === isSessionStorageEnabled() && setSessionStorage("blueULC", t),
    !0 === isLocalStorageEnabled() && setLocalStorage("blueULC", t)
  ) : (
    !0 === isCookieEnabled() && getCookieBlue("blueULC").length && (window.blue_ulc = getCookieBlue("blueULC")),
    !0 === isSessionStorageEnabled() && getSessionStorage("blueULC").length && (window.blue_ulc = getSessionStorage("blueULC")),
    !0 === isLocalStorageEnabled() && getLocalStorage("blueULC").length && (window.blue_ulc = getLocalStorage("blueULC"))
  );
}
function getDomainBlue(e) {
  var t = e.split(".").length == 3
    ? /(?:www\.)?((?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9\-]{0,61}[a-z0-9])/i
    : /(?:www\.)?(?:.+?\.)?([a-z0-9\-]+\.(?:[a-z\.]{2,6})$)/i;
  const o = t.exec(e);
  return o ? o[1] : null;
}

loadFunction = function (e, t) { blue_obj[instId][e](t); };

executeRequests = function (e, t) {
  var o = blue_obj[instId].getAttributes().pixelMode, n = [];
  if (o) {
    var i = blue_obj[instId].mountSourcePixel(e, t), r = createImgElement(i);
    n.push(r);
  } else {
    var a = blue_obj[instId].mountSource(e, t), u = createIframeElement(a);
    n.push(u);
    var c = blue_obj[instId].getSslWidget(e, t), l = createScriptElement(c);
    n.push(l);
  }
  createDivElement(function (e) {
    for (var t = 0; t < n.length; t++) document.getElementById(e).appendChild(n[t]);
  });
};

blue_obj = function () {};
blue_obj.prototype.getSrc = function () {
  return ("https:" == document.location.protocol ? "https://" : "http://") + "event.getblue.io/p/";
};
blue_obj.prototype.getSrcPixel = function () {
  return ("https:" == document.location.protocol ? "https://" : "http://") + "event.getblue.io/p/";
};
blue_obj.prototype.mountSource = function (e, t) {
  var o = blue_obj[instId].getAttributes(), n = 1e13 * (Math.random() + "");
  return o.source + "?cId=" + e +
    "&tName=" + t +
    "&pId=" + o.blueProductId +
    "&revenue=" + o.transactionTotal +
    "&orderId=" + o.transactionId +
    "&fp=" + o.fingerprint +
    "&blueID=" + window.bluecpy_id +
    "&ulc=" + window.blue_ulc +
    "&v=" + window.blue_v +
    "&tcs=" + getLocalStorage("tcString") +
    "&nocache=" + n;
};
blue_obj.prototype.getSslWidget = function (e, t) {
  var o = blue_obj[instId].getAttributes(), n = 1e13 * (Math.random() + ""), i = 0;
  top !== self && (i = 1);
  return "https://widget.getblue.io/event/?cId=" + e +
    "&tName=" + t +
    "&pId=" + o.blueProductId +
    "&revenue=" + o.transactionTotal +
    "&orderId=" + o.transactionId +
    "&adce=1&fp=" + o.fingerprint +
    "&blueID=" + window.bluecpy_id +
    "&ulc=" + window.blue_ulc +
    "&v=" + window.blue_v +
    "&if=" + i +
    "&nocache=" + n;
};
blue_obj.prototype.mountSourcePixel = function (e, t) {
  var o = blue_obj[instId].getAttributes(), n = 1e13 * (Math.random() + "");
  return o.sourcePixel + "?cId=" + e +
    "&tName=" + t +
    "&pId=" + o.blueProductId +
    "&revenue=" + o.transactionTotal +
    "&orderId=" + o.transactionId +
    "&pixelMode=" + o.pixelMode +
    "&fp=" + o.fingerprint +
    "&blueID=" + window.bluecpy_id +
    "&ulc=" + window.blue_ulc +
    "&v=" + window.blue_v +
    "&tcs=" + getLocalStorage("tcString") +
    "&nocache=" + n;
};

blue_obj.prototype.setFingerprint = function (e) { this.fingerprint = e; };
blue_obj.prototype.setCampaignId = function (e) { this.campaignId = e; };
blue_obj.prototype.setPageType = function (e) { this.pageType = e; };
blue_obj.prototype.setProductId = function (e) { this.blueProductId = e; };
blue_obj.prototype.setTransactionTotal = function (e) { this.transactionTotal = e; };
blue_obj.prototype.setTransactionId = function (e) { this.transactionId = e; };
blue_obj.prototype.setPixelMode = function (e) { this.pixelMode = e; };

blue_obj.prototype.getAttributes = function () {
  var e = {};
  return e.campaignId = this.campaignId || "",
    e.pageType = this.pageType || "",
    e.blueProductId = this.blueProductId || "",
    e.transactionTotal = this.transactionTotal || "",
    e.transactionId = this.transactionId || "",
    e.pixelMode = this.pixelMode || 0,
    e.fingerprint = this.fingerprint || "",
    e.source = blue_obj[instId].getSrc(),
    e.sourcePixel = blue_obj[instId].getSrcPixel(),
    e;
};

createDivElement = function (e) {
  var t = "blue-tags-div";
  if (!document.getElementById(t)) {
    var o = document.createElement("div");
    o.setAttribute("id", t);
    o.setAttribute("style", "display:none;");
    document.body.appendChild(o);
  }
  e(t);
};
createIframeElement = function (e) {
  var t = document.createElement("iframe");
  t.src = e;
  t.width = 1;
  t.height = 1;
  t.frameBorder = 0;
  t.setAttribute("style", "border-width:0px; margin:0px;");
  return t;
};
createScriptElement = function (e) {
  var t = document.createElement("script");
  t.setAttribute("async", "true");
  t.setAttribute("type", "text/javascript");
  t.setAttribute("src", e);
  return t;
};
createImgElement = function (e) {
  var t = document.createElement("img");
  t.src = e;
  t.width = 1;
  t.height = 1;
  t.setAttribute("style", "border-width:0px; margin:0px; width:1px;");
  return t;
};
isSessionStorageEnabled = function () { return !!window.sessionStorage; };
isLocalStorageEnabled = function () {
  var e = "test";
  try { return localStorage.setItem(e, e), localStorage.removeItem(e), !0; } catch (e) { return !1; }
};
isCookieEnabled = function () {
  var e = navigator.cookieEnabled;
  if (!e) {
    document.cookie = "testcookie";
    e = -1 != document.cookie.indexOf("testcookie");
  }
  return !!e;
};
